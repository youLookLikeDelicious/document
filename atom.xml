<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Chaosxy</title>
  
  <subtitle>Javascript,css和php设计和开发的相关文章</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://chaosxy.com/"/>
  <updated>2020-04-11T03:09:55.507Z</updated>
  <id>https://chaosxy.com/</id>
  
  <author>
    <name>ChaosXy</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>vue-umeditor</title>
    <link href="https://chaosxy.com/archives/84554c2.html"/>
    <id>https://chaosxy.com/archives/84554c2.html</id>
    <published>2020-04-04T15:10:44.000Z</published>
    <updated>2020-04-11T03:09:55.507Z</updated>
    
    <content type="html"><![CDATA[<div id="editor">    <form action="/">        <umeditor/>        <input type="submit">    </form></div><script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.22/vue.min.js"></script><script src="/js/umeditor.bundle.js"></script><script src="/js/umeditor.1.bundle.js"></script><script>    new Vue({        el: '#editor'    })</script><a id="more"></a><h2 id="dependence">相关依赖</h2>    <ul>        <li>jQuery</li>        <li>mathquill</li>        <li>baidu map</li>    </ul><h2 id="new-feature">新特性</h2>    <ul>        <li>使用blob，对图片进行本地预览</li>        <li>修复无法插入公式的bug</li>        <li>使用Icofont替换spirit图片</li>        <li>修复无法插入地图的bug</li>    </ul><h2 id="compatibility">兼容性</h2><p>IE >= 10</p><h2 id="install">安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @blog1997/vue-umeditor --save</span><br></pre></td></tr></table></figure><h2 id="register-component">注册组件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> editor <span class="keyword">from</span> <span class="string">'@blog1997/vue-umeditor'</span></span><br><span class="line"></span><br><span class="line">Vue.use(editor)</span><br></pre></td></tr></table></figure><h2 id="add-template">添加模板</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"editor"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--toolbar为组件的props属性，指定富文本编辑器的菜单。默认全部显示--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">umeditor</span> <span class="attr">:toolbar</span>=<span class="string">"['emotion']"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="mount">挂载组件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#editor'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="upload-image">上传图片</h2><p>上传图片有两种方案可供选择</p><h3 id="upload-image-1">上传图片·(一)</h3><p>直接上传表单，需要指定图片上传的地址，但在图片上传失败的时候，会alert一个图片上传失败的信息。该方法也不会提供上传成功后的自定义操作。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"editor"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">umeditor</span> <span class="attr">:upload-url</span>=<span class="string">"'http://you_site.com/api/upload-img'"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="upload-img-2">上传图片·(二)</h3><p>如果不想使用alter，让用户有一个更好的体验。也可异步上传图片。下面的例子中使用axios对图片进行异步上传。这样，你就可以随心所欲地控制图片上传的各个阶段。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"editor"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">umeditor</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> @<span class="attr">click</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios form <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#editor'</span>,</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            editor: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * editor = UM.getEditor('editor', &#123;</span></span><br><span class="line"><span class="comment">         *   focus: true</span></span><br><span class="line"><span class="comment">         * &#125;)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        receiveUM (editor) &#123;</span><br><span class="line">            <span class="keyword">this</span>.editor = editor</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 提交表单</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        submit () &#123;</span><br><span class="line">            <span class="keyword">const</span> files = <span class="built_in">window</span>.UM.getFileFormDate()</span><br><span class="line">            <span class="comment">// 如果文章中没有图片上传</span></span><br><span class="line">            <span class="keyword">if</span> (!files) &#123;</span><br><span class="line">                <span class="keyword">this</span>.uploadForm()</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 开始上传图片</span></span><br><span class="line">            axios(&#123;</span><br><span class="line">                method: <span class="string">'POST'</span>,</span><br><span class="line">                url: <span class="string">'your_url'</span>,</span><br><span class="line">                data: files</span><br><span class="line">            &#125;).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 文件上传成功</span></span><br><span class="line">                <span class="built_in">window</span>.UM.replaceImageUrl(response.data.data)</span><br><span class="line">                <span class="comment">// do something as your wish</span></span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 文件上传失败</span></span><br><span class="line">                <span class="comment">// do something as your wish</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 上传最终的表单</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        uploadForm () &#123;</span><br><span class="line">            <span class="keyword">const</span> content = <span class="keyword">this</span>.UM.getContent()</span><br><span class="line"></span><br><span class="line">            axios(&#123;</span><br><span class="line">                method: <span class="string">'POST'</span>,</span><br><span class="line">                url: <span class="string">'your/url'</span>,</span><br><span class="line">                data: content</span><br><span class="line">            &#125;).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 上传文章成功</span></span><br><span class="line">                <span class="comment">// do something as your wish</span></span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 上传文章失败</span></span><br><span class="line">                <span class="comment">// do something as your wish</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="attention">注意</h2><p>不能设置img标签的id属性</p><p>文件打包的时候，需要对代码进行分割。使用webpack的code split功能。否则，打包文件过大。</p><h3 id="issues"><a href="https://gitee.com/ju_15163364725/ju_15163364725/issues" target="_blank" rel="noopener">Issues</a></h3><script type="text/javascript">    (function(d, s) {        var j, e = d.getElementsByTagName(s)[0];        if (typeof LivereTower === 'function') { return; }        j = d.createElement(s);        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';        j.async = true;        e.parentNode.insertBefore(j, e);    })(document, 'script');</script><p><noscript> 为正常使用来必力评论功能请激活JavaScript</noscript></p>]]></content>
    
    <summary type="html">
    
      rich text editor for vue js
    
    </summary>
    
    
    
      <category term="vue" scheme="https://chaosxy.com/tags/vue/"/>
    
      <category term="umeditor" scheme="https://chaosxy.com/tags/umeditor/"/>
    
  </entry>
  
</feed>
